<div class="user-management">
  <mat-toolbar color="primary">
    <span>Quản Lý Người Dùng</span>
    
  </mat-toolbar>

  <div class="col-lg-12">
    <mat-card class="cardWithShadow">
      <mat-card-content>
        <div class="toolbar-container">
          <mat-form-field>
            <mat-label>Tìm kiếm</mat-label>
            <input matInput (keyup)="applyFilter($event)" placeholder="Tìm kiếm người dùng">
          </mat-form-field>
          
          <span class="example-spacer"></span>
          
          <button mat-raised-button color="primary" class="add-user-button" (click)="addUser()">
            Thêm Người Dùng
          </button>
        </div>  
        <div class="table-responsive m-t-16">
          <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">
            <ng-container matColumnDef="username">
              <th mat-header-cell *matHeaderCellDef> Tên Tài Khoản </th>
              <td mat-cell *matCellDef="let user">{{ user.username }}</td>
            </ng-container>

            <ng-container matColumnDef="email">
              <th mat-header-cell *matHeaderCellDef> Email </th>
              <td mat-cell *matCellDef="let user">{{ user.email }}</td>
            </ng-container>

            <ng-container matColumnDef="phone">
              <th mat-header-cell *matHeaderCellDef> Điện Thoại </th>
              <td mat-cell *matCellDef="let user">{{ user.phone }}</td>
            </ng-container>

            <ng-container matColumnDef="address">
              <th mat-header-cell *matHeaderCellDef> Địa Chỉ </th>
              <td mat-cell *matCellDef="let user">
                <mat-form-field appearance="fill">
                  <textarea matInput [(ngModel)]="user.address" rows="1" readonly></textarea>
                </mat-form-field>
              </td>
            </ng-container>

            <ng-container matColumnDef="balance">
              <th mat-header-cell *matHeaderCellDef> Số Dư </th>
              <td mat-cell *matCellDef="let user">{{ user.balance }}</td>
            </ng-container>

            <ng-container matColumnDef="role">
              <th mat-header-cell *matHeaderCellDef> Vai Trò </th>
              <td mat-cell *matCellDef="let user">
                <span
                  [ngClass]="{
                    'bg-light-success text-success': user.role === 'tenant',
                    'bg-light-error text-error': user.role === 'admin',
                    'bg-light-primary text-primary': user.role === 'landlord'
                  }"
                  class="rounded f-w-600 p-6 p-y-4 f-s-12"
                >{{ user.role }}</span>
              </td>
            </ng-container>

            <ng-container matColumnDef="actions">
              <th mat-header-cell *matHeaderCellDef> Hành Động </th>
              <td mat-cell *matCellDef="let user">
                <button mat-icon-button color="accent" (click)="editUser(user)">
                  <mat-icon>edit</mat-icon>
                </button>
                <button mat-icon-button color="warn" (click)="deleteUser(user)">
                  <mat-icon>delete</mat-icon>
                </button>
              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
          </table>
        </div>

        <mat-paginator [length]="dataSource.data.length" [pageSize]="5" [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>
      </mat-card-content>
    </mat-card>
  </div>
</div>